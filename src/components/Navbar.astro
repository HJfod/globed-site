---
import { BookIcon, DownloadIcon, GithubIcon, GlobeIcon, HomeIcon } from "astro-feather";
import { Image } from "astro:assets";
import logo from "../images/logo.png"
import discord from "../images/discord.svg?raw"
import github from "../images/github.svg?raw"
import kofi from "../images/kofi.svg?raw"

const urlBase = import.meta.env.BASE_URL.endsWith('/') ? import.meta.env.BASE_URL.slice(0, -1) : import.meta.env.BASE_URL;
---

<nav class="
    fixed
    main-navbar
    flex flex-col
    justify-stretch items-stretch
    w-full
    bg-quardiary-darkest
    border-b-2 border-b-accent-lightest
    transition-all
">
    <div class="grid sm:grid-cols-3 max-sm:grid-cols-2 justify-center items-center">
        <div class="flex flex-row justify-start items-center gap-3">
            <a class="home-button" href={`${urlBase}/`}>
                <!-- <Image src={logo} alt="Globed logo" class="w-[24px] h-[24px]"/> -->
                <GlobeIcon/>
                <span class="font-head text-xl">Globed</span>
            </a>
        </div>
        <div class="flex flex-row justify-center max-sm:hidden font-head text-lg">
            <a href={`${urlBase}/`}>Home</a>
            <a href={`${urlBase}/install`}>Install</a>
            <a href={`${urlBase}/about`}>About</a>
            <a href={`${urlBase}/faq`}>FAQ</a>
        </div>
        <div class="flex flex-row justify-end">
            <a href="https://ko-fi.com/globed">
                <div class="w-[24px]">
                    <Fragment set:html={kofi} />
                </div>
            </a>
            <a href="https://discord.gg/d56q5Dkdm3">
                <div class="w-[24px]">
                    <Fragment set:html={discord} />
                </div>
            </a>
            <a href="https://github.com/GlobedGD/globed2">
                <div class="w-[24px]">
                    <Fragment set:html={github} />
                </div>
            </a>
        </div>
    </div>
    <div id="rollover" class="flex flex-col px-4 font-head">
        <a href={`${urlBase}/`}><span>Home</span></a>
        <a href={`${urlBase}/install`}><span>Install</span></a>
        <a href={`${urlBase}/about`}><span>About</span></a>
    </div>
</nav>

<script>
    document.querySelectorAll('.home-button').forEach(btn => {
        btn.addEventListener('click', e => {
            if (window.matchMedia("(max-width: 640px)").matches) {
                e.preventDefault();
                document.querySelector('.main-navbar')?.classList.toggle('open');
            }
        });
    });
</script>

<style>
    nav > #rollover {
        @apply
            max-h-0
            transition-all
            overflow-hidden;

        transition-duration: 350ms;
    }
    nav.open > #rollover {
        @apply
            max-h-44;
    }

    a {
        @apply
            p-3
            flex flex-row gap-2
            items-center
            text-accent-lightest
            fill-accent-lightest
            transition-colors;
    }
    a:hover {
        @apply
            text-tertiary-lighter
            fill-tertiary-lighter
            cursor-pointer;
    }
</style>
